---
title: "[Node.js] Node.js ê°œìš”"
category: "Node.js"
tag: ["Node.js", "NodeJs", "ESM", "CJS", "CommonJs", "ES Module"]
---

# ê°œìš”

Node.jsëŠ” Chrome V8 ì—”ì§„ìœ¼ë¡œ ë¹Œë“œëœ Javascript ëŸ°íƒ€ì„ìœ¼ë¡œ, ê¸°ì¡´ì˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ì›¹ ë¸Œë¼ìš°ì € ê¸°ë°˜ìœ¼ë¡œë§Œ ì‘ë™í•˜ì˜€ë‹¤ë©´ ì´ë¥¼ ì»´í“¨í„° ìì²´ì—ì„œë„ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” í¬ë¡œìŠ¤ í”Œë«í¼ ìë°”ìŠ¤í¬ë¦½íŠ¸ ëŸ°íƒ€ì„ í™˜ê²½ì´ë‹¤. 

Node.jsë¼ëŠ” í”Œë«í¼ì„ í†µí•´ ì´ì œ ê°œë°œìëŠ” ê¸°ì¡´ì— ì›¹ ë¸Œë¼ìš°ì €ì—ì„œë§Œ ë™ì‘í•˜ë©° ì›¹ ì‚¬ì´íŠ¸ë¥¼ ë™ì ìœ¼ë¡œ ë§Œë“œëŠ” ì‘ì—…ì— ì œí•œë˜ì—ˆë˜ ê²ƒê³¼ ë‹¬ë¦¬ ìë°”, íŒŒì´ì¬ê³¼ ê°™ì€ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¡œì„œì˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤. ì¦‰, ë…ë¦½ì ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ì œì‘ì´ ê°€ëŠ¥í•´ì¡Œë‹¤. 

ì´ë¡œ ì¸í•´ ì´ì œ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œë„ ì„œë²„ ì‚¬ì´ë“œ ì‘ì—…ì„ í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤. DB ì—°ë™, RESTFul API ì œì‘ ë“±ì´ ê·¸ ì˜ˆì´ë‹¤. 

Node.jsì˜ íŠ¹ì§• ì¤‘ í•˜ë‚˜ëŠ” ì´ë²¤íŠ¸ ê¸°ë°˜ ë° ë…¼ë¸”ë¡œí‚¹ I/O ê¸°ë°˜ì„ í†µí•´ ì—¬ëŸ¬ ìš”ì²­ë“¤ì„ ë³‘ë ¬ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. ë³¸ë˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ì‹±ê¸€ ìŠ¤ë ˆë“œ ê¸°ë°˜ì´ê¸°ì— í•œ ë²ˆì— ë‹¨ í•œ ê°œì˜ ìš”ì²­(ë˜ëŠ” ì‘ì—…)ë§Œì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ í•œê³„ì ì„ ê·¹ë³µí•˜ê¸° ìœ„í•´ Node.jsì—ì„œëŠ” ì´ë²¤íŠ¸ ë£¨í”„ ë° ë…¼ë¸”ë¡œí‚¹ ëª¨ë¸ì„ ê¸°ë°˜ìœ¼ë¡œ í•œë‹¤. 

ë™ê¸°, ë¹„ë™ê¸°ëŠ” ë‘˜ ì´ìƒì˜ ì‘ì—…ì´ ì§ë ¬ì ìœ¼ë¡œ ìˆœì°¨ì ìœ¼ë¡œ ì§„í–‰ë˜ëŠ” ë°©ì‹ì¸ì§€, ë³‘ë ¬ì ìœ¼ë¡œ ë™ì‹œì— ì§„í–‰ë˜ëŠ” ë°©ì‹ì¸ì§€, ì¦‰ ì‘ì—…ì˜ íë¦„ì— ëŒ€í•œ ê´€ì ì´ë‹¤. ë¸”ë¡œí‚¹, ë…¼ë¸”ë¡œí‚¹ì€ ê°ê° í˜„ì¬ ì‘ì—…ì„ ì°¨ë‹¨, ëŒ€ê¸°í•˜ëŠëƒ ì•„ë‹ˆëƒì— ëŒ€í•œ ê´€ì ì´ë‹¤. ì´ë ‡ê²Œ ë³´ë©´ ë¸”ë¡œí‚¹, ë…¼ë¸”ë¡œí‚¹ì€ ë™ê¸°, ë¹„ë™ê¸°ì™€ ê°™ì€ ê°œë…ìœ¼ë¡œ ë³´ì¸ë‹¤. ë™ê¸°ì ì¸ ë°©ì‹ì´ ì§„í–‰ë˜ë ¤ë©´ í•˜ë‚˜ì˜ ì‘ì—…ì„ ë¨¼ì € ìˆ˜í–‰í•´ì•¼í•˜ê¸°ì— ê·¸ ë‹¤ìŒ ì‘ì—…ì˜ ì§„í–‰ì„ ì°¨ë‹¨í•´ì•¼ í•œë‹¤. ë°˜ëŒ€ë¡œ ë¹„ë™ê¸°ì  ë°©ì‹ì´ ì§„í–‰ë˜ë ¤ë©´ ë‘˜ ì´ìƒì˜ ì‘ì—…ì´ ì„œë¡œì— ì˜í•´ ì°¨ë‹¨ë˜ì§€ ì•Šì•„ì•¼ í•œë‹¤. 

ì¼ë¡€ë¡œ, ìë°”ìŠ¤í¬ë¦½íŠ¸ì— ì¡´ì¬í•˜ëŠ” setTimeout() í•¨ìˆ˜ëŠ” ë¹„ë™ê¸° í•¨ìˆ˜ì´ì§€ë§Œ ë™ì‹œì— ë…¼ë¸”ë¡œí‚¹ í•¨ìˆ˜ì´ê¸°ë„ í•œë‹¤. 

í•˜ì§€ë§Œ ì—„ë°€í•œ ì˜ë¯¸ì—ì„œëŠ” ë™ê¸°, ë¹„ë™ê¸°ì™€ ë¸”ë¡œí‚¹, ë…¼ë¸”ë¡œí‚¹ì€ ì¡°ê¸ˆ ë‹¤ë¥¸ ê°œë…ì´ë‹¤. ë°©ê¸ˆ ì„¤ëª…í–ˆë“¯, ë™ê¸°, ë¹„ë™ê¸°ëŠ” ì‘ì—…ì˜ íë¦„ ìˆœì„œì— ì´ˆì ì„ ë‘ë©°, ë¸”ë¡œí‚¹, ë…¼ë¸”ë¡œí‚¹ì€ ì‘ì—…ì˜ íë¦„ì„ ì°¨ë‹¨(ëŒ€ê¸°)ì‹œí‚¤ëƒ ì•„ë‹ˆëƒì˜ ê´€ì ìœ¼ë¡œ ë°”ë¼ë³´ê¸° ë•Œë¬¸ì´ë‹¤. 

ì´ëŸ¬í•œ ì—„ë°€í•œ ì˜ë¯¸ì—ì„œì˜ ì°¨ì´ë¡œ ì¸í•´ ì‚¬ì‹¤ ë™ê¸°-ë¹„ë™ê¸°ì™€ ë¸”ë¡œí‚¹-ë…¼ ë¸”ë¡œí‚¹ì˜ ì¡°í•©ì´ ê°€ëŠ¥í•˜ì—¬ 4ê°€ì§€ì˜ ì¡°í•©ì´ ê°€ëŠ¥í•˜ë‹¤. ë™ê¸° - ë¸”ë¡œí‚¹, ë¹„ë™ê¸° - ë¸”ë¡œí‚¹, ë™ê¸° - ë…¼ë¸”ë¡œí‚¹, ë¹„ë™ê¸° - ë…¼ë¸”ë¡œí‚¹ ì´ë ‡ê²Œ ê°€ëŠ¥í•˜ë‹¤. ê·¸ë¦¬ê³  ì´ëŸ¬í•œ ì¡°í•©ì— ë”°ë¼ í”„ë¡œê·¸ë¨ì˜ ì„±ëŠ¥ ë° íš¨ìœ¨ì„±ì— ì˜í–¥ì„ ë¼ì¹œë‹¤. 

ì¼ë°˜ì ì¸ ì˜ë¯¸ì—ì„œëŠ” ì´ë ‡ê²Œ 4ê°€ì§€ ì¡°í•©ì´ ê°€ëŠ¥í•˜ì§€ë§Œ Node.jsì—ì„œëŠ” ë”± ë‘ ê°€ì§€ ì¡°í•©ë§Œìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤ê³  í•œë‹¤. ë¹„ë™ê¸° ì‘ì—… ì‹œì—ëŠ” ë¹„ë™ê¸° - ë…¼ ë¸”ë¡œí‚¹ ë°©ì‹ì„ ì‚¬ìš©í•˜ê³ , ìˆœì°¨ì  ì‘ì—… íë¦„ì´ í•„ìš”í•œ ìˆœê°„ì—ëŠ” ë™ê¸° - ë¸”ë¡œí‚¹ ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤ê³  í•œë‹¤. 

ìœ„ì—ì„œ ì–¸ê¸‰í•œ ë‚´ìš©ê³¼ ë”ë¶ˆì–´ ì—¬ê¸°ì„œ ì–¸ê¸‰í•˜ì§€ ì•Šì€ Node.jsì˜ íŠ¹ì§•ê¹Œì§€ ëª¨ë‘ ì •ë¦¬í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

Node.jsì˜ íŠ¹ì§•

- Chrome V8 ì—”ì§„ìœ¼ë¡œ ë¹Œë“œëœ í¬ë¡œìŠ¤ í”Œë«í¼ ìë°”ìŠ¤í¬ë¦½íŠ¸ ëŸ°íƒ€ì„ í™˜ê²½ìœ¼ë¡œ, ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì„œë²„ì—ì„œë„ ì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ í•˜ë©°, ë…ë¦½ì ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ì œì‘ì„ ê°€ëŠ¥ì¼€ í•œë‹¤.
- ì´ë²¤íŠ¸ ê¸°ë°˜ê³¼ ë…¼ë¸”ë¡œí‚¹ I/Oì— ê¸°ë°˜í•˜ê¸°ì— ë³¸ë˜ ì‹±ê¸€ ìŠ¤ë ˆë“œì¸ ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ë‹¨ì ì„ ë³´ì™„í•˜ì—¬ ì‘ì—…(ë˜ëŠ” ìš”ì²­)ë“¤ì„ ë³‘ë ¬ë¡œ ì²˜ë¦¬í•´ ëŒ€ê·œëª¨ íŠ¸ë˜í”½ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.
- í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ëª¨ë‘ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¼ëŠ” ë‹¨ì¼ ì–¸ì–´ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ê°œë°œ íš¨ìœ¨ì„±ì´ ë†’ì•„ì§€ë©°, ì–¸ì–´ì˜ ì¼ê´€ì„±ì„ í™•ë³´í•  ìˆ˜ ìˆë‹¤.
- Node.jsëŠ” NPMê³¼ ê°™ì€ ëª¨ë“ˆ ì‹œìŠ¤í…œì„ ì´ìš©í•˜ì—¬ í•„ìš”í•œ ëª¨ë“ˆë§Œ ì¶”ê°€í•˜ì—¬ í™•ì¥í•  ìˆ˜ ìˆì–´ ìœ ì—°í•œ í™•ì¥ì„±ì„ ê°€ì§„ë‹¤.
- ì›¹ì†Œì¼“ë„ ì§€ì›í•˜ê¸°ì— ì±„íŒ…, ì£¼ì‹, ê²Œì„ê³¼ ê°™ì€ ì‹¤ì‹œê°„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì œì‘ì—ë„ ìœ ë¦¬í•˜ë‹¤.
- ì„œë²„ë¡œ ì‚¬ìš© ì‹œ ê²½ëŸ‰ ì„œë²„ ì—­í• ì„ í•˜ê¸°ì— ì„¤ì • ë° ë°°í¬ ê³¼ì •ì´ ê°„ë‹¨í•˜ë‹¤.
- Node.jsë¡œ ì œì‘í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì—¬ëŸ¬ ìš´ì˜ì²´ì œì—ì„œë„ ì‹¤í–‰ ê°€ëŠ¥í•˜ë‹¤. ì¦‰, í¬ë¡œìŠ¤ í”Œë«í¼ì´ë‹¤.
- ë¹„ë™ê¸°ì‹ íŒŒì¼ ì…ì¶œë ¥, DB ì—°ë™ ë“±ì˜ ì‘ì—…ë„ ê°€ëŠ¥í•˜ë‹¤.
- DB ì—°ë™ ì‘ì—… ë° ì™¸ë¶€ APIì™€ì˜ í†µì‹  ì‘ì—…ì„ í•  ìˆ˜ ìˆì–´ ë¯¸ë“¤ì›¨ì–´ ì„œë²„ì˜ ì—­í• ë„ í•  ìˆ˜ ìˆë‹¤.

# ES Module (ESM) VS CommonJS (CJS)

Node.jsì˜ ë“±ì¥ìœ¼ë¡œ ì¸í•´ ì´ì œ ìë°”ìŠ¤í¬ë¦½íŠ¸ë„ ëª¨ë“ˆí™”ê°€ ê°€ëŠ¥í•´ì¡Œë‹¤. ê·¸ëŸ°ë° ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ëª¨ë“ˆ ì‹œìŠ¤í…œì´ ë‘ ê°€ì§€ì´ë‹¤. ES Module (ESM)ê³¼ CommonJS (CJS)ì´ë‹¤. ë§ì€ íŒ¨í‚¤ì§€ë“¤ì€ CJSë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§ì´ ì‘ì„±ë˜ì—ˆë‹¤ê³  í•˜ë‚˜, í˜„ì¬ëŠ” ESM ë°©ì‹ì´ ì£¼ë¡œ ì‚¬ìš©ëœë‹¤ê³  í•œë‹¤. 

ESM ë°©ì‹ìœ¼ë¡œ ì‘ì„±ëœ ëª¨ë“ˆì€ ì£¼ë¡œ ë‹¤ìŒì˜ í˜•íƒœë¥¼ ë¤ë‹¤.

```jsx
// ì˜ì‚¬ì½”ë“œ
import MyModule from './myModule.mjs';

function myFunc() {...}
function otherFunc() {...}

export { myFunc, otherFunc };
```

ë°˜ë©´, CJS ë°©ì‹ìœ¼ë¡œ ì‘ì„±ëœ ëª¨ë“ˆì€ ë‹¤ìŒì˜ í˜•íƒœë¥¼ ë¤ë‹¤. 

```jsx
// requireë¥¼ ì´ìš©í•˜ì—¬ ./myMath ëª¨ë“ˆ import
const { odd, even } = require('./myMath');

// ì´ ëª¨ë“ˆì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥í•œ ì§€ì—­ í•¨ìˆ˜. 
function chkOddEven(arg) {
    if (arg % 2) {
        return odd;
    }
    return even;
}

// ìœ„ í•¨ìˆ˜ë¥¼ ì™¸ë¶€ ëª¨ë“ˆì—ì„œë„ ì‚¬ìš©í•˜ê³ ì í•œë‹¤ë©´ ë‹¤ìŒì˜ ì½”ë“œ ì…ë ¥
module.exports = chkOddEven;
```

ì¦‰, ëª¨ë“ˆì„ import, exportí•˜ëŠ” ë°©ì‹ì´ ë‹¤ë¥¸ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ê·¸ë ‡ê¸°ì— CJS ë°©ì‹ìœ¼ë¡œ ì‘ì„±ëœ ëª¨ë“ˆê³¼ ESM ë°©ì‹ìœ¼ë¡œ ì‘ì„±ëœ ëª¨ë“ˆë¼ë¦¬ì˜ í˜¸í™˜ì„±ì´ ì—†ë‹¤. 

ì´ ì™¸ì—ë„ ESMê³¼ CJS ê°„ì˜ ì—¬ëŸ¬ ì°¨ì´ì ì´ ì¡´ì¬í•œë‹¤. 

- ESM ë°©ì‹ì€ import êµ¬ë¬¸ì„ ì½”ë“œ ì¤‘ê°„ì— í˜¸ì¶œí•  ìˆ˜ ì—†ê³ , ë°˜ë“œì‹œ ëª¨ë“ˆ ìµœìƒìœ„ì— í˜¸ì¶œí•´ì•¼ í•œë‹¤. ë°˜ë©´ CJS ë°©ì‹ì€ importë¬¸ì— í•´ë‹¹í•˜ëŠ” requireë¬¸ì„ ì½”ë“œ ì¤‘ê°„ì— ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
    - CJS ë°©ì‹ì˜ ëª¨ë“ˆ import ì‹œìŠ¤í…œì€ ë™ì ì¸ íŠ¹ì„±ì„ ê°€ì§„ë‹¤. ì¦‰, ì½”ë“œ ì¤‘ê°„ì— require ë¬¸ì„ ë§Œë‚˜ë©´ ê·¸ë•Œê·¸ë•Œ ë°”ë¡œ ë‹¤ë¥¸ ëª¨ë“ˆì„ importí•˜ëŠ” ì‹œìŠ¤í…œì´ë‹¤.
    - ë°˜ë©´, ESMì€ ë°˜ë“œì‹œ ëª¨ë“ˆ ìµœìƒìœ„ì—ì„œ ë‹¤ë¥¸ ëª¨ë“ˆì„ import í•´ì•¼í•˜ê¸°ì— ì •ì ì¸ íŠ¹ì„±ì„ ê°€ì§„ë‹¤. ì¦‰, í•„ìš”í•œ ëª¨ë“ˆì´ ìˆìœ¼ë©´ ì²˜ìŒë¶€í„° í•œêº¼ë²ˆì— import í•´ì™€ì•¼ í•˜ëŠ” ì‹œìŠ¤í…œì´ë‹¤.
    - ì´ëŸ¬í•œ ì°¨ì´ê°€ ì¡´ì¬í•˜ëŠ” ì´ìœ ëŠ”, ESMì—ì„œëŠ” ëª¨ë“ˆ ì¢…ì†ì„±, ì¦‰ ëª¨ë“ˆë“¤ ê°„ì˜ importë¡œ ì¸í•œ ì¢…ì†ì„± ê´€ê³„ë¥¼ ëª¨ë‘ íŒë‹¨í•œ í›„ì— ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ë°˜ë©´, CJSëŠ” ì½”ë“œ ìƒì—ì„œ requireë¬¸ì„ ë§Œë‚˜ë©´ ëª¨ë“ˆë“¤ ê°„ì˜ ì¢…ì†ì„±ì´ ì–´ë–»ë“  ìƒê´€í•˜ì§€ ì•Šê³  ê·¸ ì¦‰ì‹œ í•´ë‹¹ ëª¨ë“ˆì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì‹œìŠ¤í…œì´ê¸° ë•Œë¬¸ì´ë‹¤. ì‰½ê²Œ ë§í•˜ë©´ ESMì€ ê³„íšì ì´ê³ , CJSëŠ” ì¦‰í¥ì ì´ë¼ê³  ë§í•  ìˆ˜ ìˆê² ë‹¤.

ESMì—ì„œëŠ” ëª¨ë“ˆê°„ ì¢…ì†ì„±ì„ í™•ì¸í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ, ê°ê°ì˜ ëª¨ë“ˆë“¤ì„ treeë¥¼ êµ¬ì„±í•˜ëŠ” í•˜ë‚˜ì˜ Nodeë¡œ ë³´ê³ , ì´ë“¤ì„ ì¬ê·€ì  ê¹Šì´ ìš°ì„  íƒìƒ‰(DFS, Depth First Search)ì„ ì´ìš©í•˜ì—¬ ëª¨ë“ˆë“¤ì˜ ì¢…ì†ì„± ê´€ê³„ë¥¼ íŠ¸ë¦¬ë¡œ êµ¬ì¡°í™”í•˜ëŠ” ë°©ì‹ì„ ì·¨í•œë‹¤. ì¡°ê¸ˆ ë” ìì„¸íˆ ë§í•˜ë©´ ë‹¤ìŒì˜ ê³¼ì •ì„ ê±°ì¹œë‹¤.

1. ìƒì„±(parsing) : ëª¨ë“ˆë“¤ ê°„ì˜ importë¬¸ì„ ì¬ê·€ì ìœ¼ë¡œ ê²€ìƒ‰í•˜ì—¬ ëª¨ë“  ëª¨ë“ˆë“¤ì˜ ë‚´ìš©ì„ ë©”ëª¨ë¦¬ì— ì ì¬(loading)í•œë‹¤. ì•„ì§ ëª¨ë“ˆ ê°„ì˜ ì¢…ì†ì„± ê´€ê³„ë¥¼ íŒŒì•…í•˜ì§€ëŠ” ì•Šì€ ìƒíƒœ. 
2. ì¸ìŠ¤í„´ìŠ¤í™” : ë°”ë¡œ ì´ì „ì˜ â€œìƒì„±â€ ê³¼ì •ì—ì„œ ì–»ì€ ëª¨ë“ˆë“¤ì˜ íŠ¸ë¦¬ êµ¬ì¡°ë¥¼ ì°¸ì¡°í•˜ì—¬ ê°ê°ì˜ ëª¨ë“ˆ ë‚´ì—ì„œ exportëœ ê°ì²´ ì°¸ì¡°ë¥¼ ë©”ëª¨ë¦¬ì— ìœ ì§€, ì¢…ì†ì„± ê´€ê³„ë¥¼ ì¶”ì í•œë‹¤. ì´ ê³¼ì •ì—ì„œ export ê´€ê³„ë¥¼ ë§µìœ¼ë¡œ ë§Œë“ ë‹¤. (ì•„ë§ˆë„ ê·¸ë˜í”„ ì´ë¡ ì—ì„œ ì¸ì ‘ë¦¬ìŠ¤íŠ¸ (Adjacent List)ë¡œ ê° ë…¸ë“œë“¤ ê°„ì˜ ì°¸ì¡° ê´€ê³„ ì •ë³´ë¥¼ êµ¬ì¶•í•˜ëŠ” ê²ƒìœ¼ë¡œ ì¶”ì¸¡ëœë‹¤) 
3. í‰ê°€ : ëª¨ë“ˆ ê°„ ì¢…ì†ì„±ì„ ë§µìœ¼ë¡œ ë§Œë“  ê²ƒì¼ ë¿, ì‹¤ì§ˆì  ì½”ë“œëŠ” ì•„ì§ ë©”ëª¨ë¦¬ ìƒì— ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ ì´ì „ì— ë§Œë“¤ì–´ì§„ ëª¨ë“ˆ ì¢…ì†ì„± íŠ¸ë¦¬ ê·¸ë˜í”„ë¥¼ í† ëŒ€ë¡œ DFS í›„ìœ„ ê¹Šì´ ìš°ì„  íƒìƒ‰ ë°©ì‹ì„ ë”°ë¼ íŠ¸ë¦¬ì˜ leaf nodeì—ì„œ root nodeë¡œ ì•„ë˜ì—ì„œ ìœ„ë¡œ ì˜¬ë¼ê°€ëŠ” ë°©ì‹ìœ¼ë¡œ ì½”ë“œë“¤ì„ í‰ê°€í•œë‹¤. ì´ ê³¼ì •ì—ì„œ exportëœ ëª¨ë“  ê°’ë“¤ì˜ ì´ˆê¸°í™”ê°€ ë³´ì¥ëœë‹¤. 

ì´ëŸ¬í•œ ESMì˜ ëª¨ë“ˆ ì¢…ì†ì„± í‰ê°€ ë°©ì‹ì— ì˜í•´, CJSì™€ì˜ ì°¨ì´ê°€ ë˜ ë°œìƒí•œë‹¤.

- ESMì€ ëª¨ë“  ëª¨ë“ˆ ê°„ì˜ ì¢…ì†ì„± ë¶„ì„ì´ ì™„ë£Œë˜ì–´ì•¼ ì½”ë“œê°€ ì§„í–‰ë˜ê¸°ì— CJS ë°©ì‹ì— ë¹„í•´ì„  ì‹¤í–‰ ì†ë„ê°€ ëŠë¦¬ë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ ì ì—ì„œëŠ” ESMì´ ë¶ˆë¦¬í•˜ë‹¤.
- ê·¸ëŸ¬ë‚˜ CJSëŠ” requireë¬¸ì„ ë§Œë‚˜ë©´ ë°”ë¡œ ì™¸ë¶€ ëª¨ë“ˆì„ import í•˜ëŠ” ë°©ì‹ì´ê¸°ì—, ë‘ ëª¨ë“ˆì´ ìƒí˜¸ ìˆœí™˜ ì°¸ì¡° ê´€ê³„ì— ë†“ì—¬ìˆìœ¼ë©´ ì´ ìƒí˜¸ ìˆœí™˜ ì°¸ì¡° ê´€ê³„ì„ì„ ì œëŒ€ë¡œ íŒŒì•…í•˜ì§€ ëª»í•œë‹¤. aë¼ëŠ” ëª¨ë“ˆì´ bë¼ëŠ” ëª¨ë“ˆì„ importí•˜ê³ , bë¼ëŠ” ëª¨ë“ˆì´ aë¼ëŠ” ëª¨ë“ˆì„ importí•˜ê³  ìˆì„ ê²½ìš°, ì½”ë“œ ìˆœì„œë¥¼ ë”°ë¼ aê°€ bë¥¼ ë¨¼ì € importí•˜ëŠ” ë°©ì‹ì¼ ê²½ìš° aì—ëŠ” bì˜ ì •ë³´ê°€ ìˆìœ¼ë‚˜, bì—ëŠ” aì˜ ì •ë³´ê°€ ì—†ëŠ” ë¬¸ì œê°€ ë°œìƒí•œë‹¤. ì´ëŠ” ESMì²˜ëŸ¼ ë¯¸ë¦¬ ëª¨ë“ˆ ê°„ ì¢…ì†ì„±ì„ íŒŒì•…í•˜ì§€ ì•Šê³  ì¦‰ê°ì ìœ¼ë¡œ ëª¨ë“ˆì„ importí•˜ëŠ” CJSì˜ ì‹œìŠ¤í…œì  ë¬¸ì œ ë•Œë¬¸ì´ë‹¤.
- ëª¨ë“ˆ ì¢…ì†ì„± ê´€ê³„ë¥¼ ë¯¸ë¦¬ íŒŒì•…í•˜ëŠ” ESMì˜ íŠ¹ì„±ì— ì˜í•´, ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ì½”ë“œëŠ” ì œê±°í•˜ëŠ” ì½”ë“œ ìµœì í™”ê°€ ê°€ëŠ¥í•´ì§„ë‹¤. ì´ë ‡ê²Œ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ì½”ë“œì˜ ì œê±°ë¥¼ í†µí•´ ì½”ë“œë¥¼ ìµœì í™”í•˜ëŠ” ê²ƒì„ tree shakingì´ë¼ í•œë‹¤. ë§ˆì¹˜ ë‚˜ë¬´ë¥¼ í”ë“¤ì–´ ì£½ì€ ë‚˜ë­‡ìì„ ë–¨ì–´íŠ¸ë¦¬ëŠ” ê²ƒê³¼ ê°™ì€ ì´ì¹˜ì´ë‹¤. (ì´ëŸ¬í•œ tree shakingì´ë€ ìš©ì–´ëŠ” ì£¼ë¡œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì§„ì˜ì—ì„œ ìì£¼ ì‚¬ìš©ë˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤)

ì•ìœ¼ë¡œ Node.jsê³¼ ê´€ë ¨ëœ ë‚´ìš©ì„ ë‹¤ë£° ë•Œ í•„ìëŠ” ë˜ë„ë¡ ESM ë°©ì‹ìœ¼ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•  ê²ƒì´ë‹ˆ ì°¸ê³ ë°”ë€ë‹¤. 

# Node.js ì‚´í´ë³´ê¸°

Javaì—ì„œëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ê³ ì í•œë‹¤ë©´ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì œì‘ìê°€ ì œê³µí•˜ëŠ” Jar íŒŒì¼ì„ ê°€ì ¸ì™€ ì¶”ê°€í•˜ê±°ë‚˜, maven, gradleê³¼ ê°™ì€ í”„ë¡œì íŠ¸ ê´€ë¦¬ ë„êµ¬ë¥¼ ì‚¬ìš©í•  ê²½ìš° ì˜ì¡´ì„±ì„ ê°ê° pom.xml, build.gradle íŒŒì¼ì— ì¶”ê°€í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì™¸ë¶€ íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•œë‹¤. 

Node.jsì—ì„œë„ ì™¸ë¶€ íŒ¨í‚¤ì§€ë¥¼ ê°€ì ¸ì™€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ë°, ì´ ë•Œ npm(Node Package Manage)ì„ ì£¼ë¡œ ì‚¬ìš©í•œë‹¤. 

ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì •ë³´ë¥¼ package.jsonì— ë“±ë¡í•˜ê³ , í„°ë¯¸ë„ ì°½ì—ì„œ `npm i` ë¥¼ ì…ë ¥í•˜ì—¬ ì‹¤ì§ˆì ìœ¼ë¡œ í•„ìš”í•œ íŒ¨í‚¤ì§€ë“¤ì„ ë¡œì»¬ ì»´í“¨í„°ì— ë‹¤ìš´ë¡œë“œí•˜ëŠ” ë°©ì‹ì´ë‹¤. ê·¸ë˜ì„œ í”„ë¡œì íŠ¸ í´ë” ìƒì„±í•˜ê³  ë‚˜ì„œ ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ë©´ ì´í›„ì— ë™ì ìœ¼ë¡œ ì™¸ë¶€ íŒ¨í‚¤ì§€ë¥¼ ì†ì‰½ê²Œ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤. 

```jsx
npm init -y
```

ì—¬ê¸°ì„œ `-y` ëŠ” ì„¤ì¹˜ ê³¼ì •ì—ì„œ í„°ë¯¸ë„ì°½ì—ì„œ ì§ˆë¬¸ì„ í•˜ëŠ”ë°, ëª¨ë‘ yesë¡œ ìë™ ì„¤ì •í•˜ì—¬ ë²ˆê±°ë¡œì›€ì„ ì—†ì• ê³ ì í•  ë•Œ ì‚¬ìš©ëœë‹¤. 

```jsx
PS C:\Work\NodeJsStudyWorkSpace\first-nodejs> npm init -y
Wrote to C:\Work\NodeJsStudyWorkSpace\first-nodejs\package.json:

{
  "name": "first-nodejs",
  "version": "1.0.0",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "description": ""
}

```

í•´ë‹¹ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ í”„ë¡œì íŠ¸ í´ë” ë°‘ì— package.jsonì´ ìƒˆë¡œ ìƒì„±ëœë‹¤. 

![ìŠ¤í¬ë¦°ìƒ· 2024-12-12 155215.png](/images/2024-12-11/nodejs%20%EA%B0%9C%EC%9A%94/1.png)

ê·¸ë¦¬ê³  package.json ë‚´ìš©ì€ ë‹¤ìŒê³¼ ê°™ì´ ì´ˆê¸°í™”ë˜ì–´ ìˆë‹¤.

```jsx
{
  "name": "first-nodejs",  // í”„ë¡œì íŠ¸ í´ë”ëª…
  "version": "1.0.0",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "description": ""
}

```

package.json

ì´ì œ ì •ë§ë¡œ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•  ìˆ˜ ìˆëŠ”ì§€ ì‚´í´ë³´ì. ì•„ë˜ì™€ ê°™ì€ ëª…ë ¹ì–´ë¥¼ í†µí•´ axiosë¥¼ ì‚¬ìš©í•´ë³´ë„ë¡ í•˜ê² ë‹¤. 

```jsx
npm i axios
```

```jsx
PS C:\Work\NodeJsStudyWorkSpace\first-nodejs> npm i axios

added 9 packages, and audited 10 packages in 778ms

1 package is looking for funding
  run `npm fund` for details

found 0 vulnerabilities
```

ëª…ë ¹ì–´ ì‹¤í–‰ ê²°ê³¼

```jsx
{
  "name": "first-nodejs",
  "version": "1.0.0",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "description": "",
  
  // ì¶”ê°€ë¨
  "dependencies": {
    "axios": "^1.7.9"
  }
}

```

package.json

ìœ„ì™€ ê°™ì´ â€œdependenciesâ€ í”„ë¡œí¼í‹°ê°€ ìƒˆë¡œ ì¶”ê°€ë˜ì—ˆê³ , ê·¸ ì•ˆì˜ valueë¡œ â€œaxiosâ€ ì •ë³´ê°€ ì¶”ê°€ë¨ì„ ì•Œ ìˆ˜ ìˆë‹¤. ì•ìœ¼ë¡œ npm i ëª…ë ¹ì–´ë¥¼ í†µí•´ ë‹¤ë¥¸ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•  ë•Œì—ë„ í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì •ë³´ê°€ package.jsonì— ê¸°ë¡ëœë‹¤. ì´í›„ì— ì˜ì¡´ì„± íŒ¨í‚¤ì§€ì¸ node_modulesë¥¼ ì‚­ì œí•˜ë”ë¼ë„ ì´ package.jsonë§Œ ì˜ ë³´ì¡´ë˜ì–´ ìˆë‹¤ë©´ ë‚˜ì¤‘ì— ë‹¤ë¥¸ ê³³ì—ì„œë„ `npm i`ë§Œ ì¹˜ë©´ ì˜ì¡´ì„±ë“¤ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤. 

ì´ì œ ì™¸ë¶€ ì˜ì¡´ì„±ì¸ axiosë¥¼ ì‚¬ìš©í•´ë³´ì. index.mjs íŒŒì¼ì„ ìƒì„±í•˜ì—¬ ë‹¤ìŒì˜ ì½”ë“œë¥¼ ì‘ì„±í•˜ì˜€ë‹¤.

```jsx
import axios from "axios";

const fetchData = async () => {
    try {
        const response = await axios(`https://jsonplaceholder.typicode.com/posts/${1}`);
        
        // ê°€ì ¸ì˜¨ ë°ì´í„° ì¶œë ¥
        console.log(response.data);
    } catch(error) {
        console.log("ë°ì´í„° ê°€ì ¸ì˜¤ëŠ” ë„ì¤‘ ì—ëŸ¬ ë°œìƒ");
        console.log('===== ì—ëŸ¬ ì „ë¬¸ =====');
        console.log(error);
        console.log('===== ì—ëŸ¬ ì „ë¬¸ ë =====');
    }
}

fetchData();
```

index.mjs

ì½˜ì†”ì°½ì—ì„œ ëª¨ë“ˆì„ ì‹¤í–‰í•˜ë ¤ë©´ `node íŒŒì¼ëª…` ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ë©´ ëœë‹¤.

```jsx
PS C:\Work\NodeJsStudyWorkSpace\first-nodejs> node index.mjs
{
  userId: 1,
  id: 1,
  title: 'sunt aut facere repellat provident occaecati excepturi optio reprehenderit',
  body: 'quia et suscipit\n' +
    'suscipit recusandae consequuntur expedita et cum\n' +
    'reprehenderit molestiae ut ut quas totam\n' +
    'nostrum rerum est autem sunt rem eveniet architecto'
}
```

index.mjs ì‹¤í–‰ ê²°ê³¼ 

ì™¸ë¶€ ë°ì´í„°ë¥¼ ì˜ ê°€ì ¸ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 

ì°¸ê³ ë¡œ ESM ëª¨ë“ˆì€ `.mjs` í™•ì¥ìë¥¼ ê°€ì§„ë‹¤. CJS ëª¨ë“ˆì€ `.cjs` ëª¨ë“ˆì„ ê°€ì§€ë‚˜ `.js` í™•ì¥ìë„ CJS ëª¨ë“ˆë¡œ ì¸ì‹ëœë‹¤. ì´ ìƒíƒœì—ì„œ ESM ëª¨ë“ˆì„ ëª…ë ¹ì–´ ì°½ì—ì„œ ì‹¤í–‰í•˜ë ¤ë©´ `node index` ê°€ ì•„ë‹ˆë¼ `node index.mjs` ì™€ ê°™ì´ ì‘ì„±í•´ì•¼ ì—ëŸ¬ ì—†ì´ ì‹¤í–‰ëœë‹¤. ë§Œì•½ í™•ì¥ìë¥¼ ìƒëµí•˜ë©´ ë‹¤ìŒì˜ ì—ëŸ¬ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.

```jsx
> node index
node:internal/modules/cjs/loader:1252
  throw err;
  ^

Error: Cannot find module 'C:\Work\NodeJsStudyWorkSpace\first-nodejs\index'
    at Function._resolveFilename (node:internal/modules/cjs/loader:1249:15)
    at Function._load (node:internal/modules/cjs/loader:1075:27)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)        
    at wrapModuleLoad (node:internal/modules/cjs/loader:218:24)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:170:5)
    at node:internal/main/run_main_module:36:49 {
  code: 'MODULE_NOT_FOUND',
  requireStack: []
}
```

ë§Œì•½ ESM ëª¨ë“ˆì˜ í™•ì¥ìë¥¼ `.js` ë¡œ ë°”ê¾¸ê³ ì í•œë‹¤ë©´ package.jsonì— `"type": "module"` í”„ë¡œí¼í‹°ë¥¼ ì¶”ê°€í•˜ë©´ ëœë‹¤. ë‹¨ ì´ ê²½ìš° CJSë¥¼ ì‚¬ìš©í•˜ê³ ì í•œë‹¤ë©´ í•´ë‹¹ íŒŒì¼ì˜ í™•ì¥ìëª…ì€ ë°˜ë“œì‹œ `.cjs` ë¼ê³  ëª…ì‹œí•´ì•¼ë§Œ í•œë‹¤. (ê·¸ëŸ°ë° í•˜ë‚˜ì˜ í”„ë¡œì íŠ¸ í´ë” ì•ˆì— ESMê³¼ CJSë¥¼ í˜¼ìš©í•˜ì—¬ ì‚¬ìš©í•  ì¼ì´ ìˆì„ê¹Œ? ì´ ë‘˜ì€ ì–´ì°¨í”¼ í˜¸í™˜ë„ ì•ˆë˜ëŠ” ë° ë§ì´ë‹¤) 

package.jsonì— ë‹¤ìŒê³¼ ê°™ì´ `"type": "module"` ë¥¼ ì¶”ê°€í•´ë³´ì•˜ë‹¤.

```jsx
{
  "name": "first-nodejs",
  "version": "1.0.0",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "description": "",
  "dependencies": {
    "axios": "^1.7.9"
  },
  "type": "module"  // ì¶”ê°€
}

```

package.json

ê·¸ í›„ `index.mjs` ë¥¼ `index.js` ë¡œ í™•ì¥ìë¥¼ ë°”ê¾¼ í›„ ì½˜ì†”ì°½ì— `node index` ë¼ê³ ë§Œ ì³ë„ ë‹¤ìŒê³¼ ê°™ì´ ê²°ê³¼ê°€ ì˜ ë‚˜ì˜¨ë‹¤.

```jsx
> node index  
{ 
  userId: 1,
  id: 1,
  title: 'sunt aut facere repellat provident occaecati excepturi optio reprehenderit',
  body: 'quia et suscipit\n' +
    'suscipit recusandae consequuntur expedita et cum\n' +
    'reprehenderit molestiae ut ut quas totam\n' +
    'nostrum rerum est autem sunt rem eveniet architecto'
}
```

---

References

[1] ì—ì´ì½˜ì•„ì¹´ë°ë¯¸(ê°•ë‚¨) ê°•ì˜

[2] ì´ê³ ì‰, â€œìƒí™œì½”ë”©! Node.js ë…¸ë“œì œì´ì—ìŠ¤ í”„ë¡œê·¸ë˜ë°â€, (ìœ„í‚¤ë¶ìŠ¤, 2022)

[3] [ë¹ ë¥´ê²Œ ë°°ìš°ëŠ” Node.jsì™€ NPM ì„¤ì¹˜ë¶€í„° ê°œë…ì¡ê¸°](https://kdydesign.github.io/2017/07/15/nodejs-npm-tutorial/)

[4] [Node.js â€” Introduction to Node.js](https://nodejs.org/ko/learn/getting-started/introduction-to-nodejs)

[5] ë™ê¸°-ë¹„ë™ê¸°, ë¸”ë¡œí‚¹-ë…¼ë¸”ë¡œí‚¹

[ğŸ‘©â€ğŸ’» ì™„ë²½íˆ ì´í•´í•˜ëŠ” ë™ê¸°/ë¹„ë™ê¸° & ë¸”ë¡œí‚¹/ë…¼ë¸”ë¡œí‚¹](https://inpa.tistory.com/entry/%F0%9F%91%A9%E2%80%8D%F0%9F%92%BB-%EB%8F%99%EA%B8%B0%EB%B9%84%EB%8F%99%EA%B8%B0-%EB%B8%94%EB%A1%9C%ED%82%B9%EB%85%BC%EB%B8%94%EB%A1%9C%ED%82%B9-%EA%B0%9C%EB%85%90-%EC%A0%95%EB%A6%AC)

[6] ë°•ì˜ê¶Œ - â€œë°ì´í„° ê³¼í•™ì + í”„ë¡œê·¸ë˜ë¨¸ ì„¸ìƒâ€ 

[Daum ì¹´í˜](https://cafe.daum.net/flowlife/RM66/1)

[7] ESM VS CJS. ê·¸ë¦¬ê³  ëª¨ë“ˆ ì¢…ì†ì„± ë¶„ì„ ì‹œìŠ¤í…œì˜ ì°¨ì´

[ESMê³¼ CommonJSì˜ ì°¨ì´](https://velog.io/@kakasoo/ESM%EA%B3%BC-CommonJS%EC%9D%98-%EC%B0%A8%EC%9D%B4)

[8] ESM VS CJS

[ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ í‘œì¤€ ì •ì˜Â : CommonJS vs ES Modules](https://medium.com/@hong009319/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EC%9D%98-%ED%91%9C%EC%A4%80-%EC%A0%95%EC%9D%98-commonjs-vs-es-modules-306e5f0a74b1)

[9] Tree shaking

[Tree shaking - MDN Web Docs Glossary: Definitions of Web-related terms \| MDN](https://developer.mozilla.org/en-US/docs/Glossary/Tree_shaking)

[10] Tree shaking

[ì›¹ ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•œ Tree Shaking ì†Œê°œ](https://helloinyong.tistory.com/305)